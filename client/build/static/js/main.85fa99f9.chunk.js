(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{224:function(e,t,a){e.exports=a(456)},231:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);a(225);var n=a(4),r=a(0),l=a.n(r),c=a(3),o=a.n(c),i=(a(231),a(232),a(94)),u=(a(155),a(18)),s=a(60),m=a(58),d=(a(236),a(212)),p=(a(238),a(150)),f=(a(157),a(29)),E=(a(457),a(215)),h=(a(248),a(148)),b=(a(458),a(222)),g=(a(251),a(220)),v=(a(253),a(36)),y=(a(255),a(219)),k=(a(68),a(10)),w=(a(257),a(30)),O=(a(259),a(216)),j=a(25),x=(a(261),a(82)),S=(a(160),a(39)),F=a(460),T=a(467),I=a(466),C=a(465),R=a(464),z=a(463),A=a(462),M=a(461),N=a(46),_=a.n(N),L=a(120),q=a.n(L),H=a(190),P=a(191),V=a(221),D=a(217),B=a(145),G=a.n(B),U=a(192);function K(e,t){return new Promise((function(a,n){var r=document.createElement("script");r.src=e,r.async=t,r.onload=function(){a()},r.onerror=function(){n()},document.body.appendChild(r)}))}var J=function(e){Object(V.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(H.a)(this,a),n=t.call(this,e),function(e){var t=!0;return e.forEach(function(){var e=Object(U.a)(G.a.mark((function e(a){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(a,!1);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t=!1;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),new Promise((function(e,a){t?e():a()}))}(["./lib/ace-1.4.4/src/ace.js","./lib/ace-1.4.4/src/theme-chrome.js","./lib/ace-1.4.4/src/mode-json.js","./lib/ace-1.4.4/src/snippets/json.js","./lib/ace-1.4.4/src/ext-language_tools.js"]).then((function(){n.setState({isLoadAce:!0})})).catch((function(e){console.error(">>>>>>",e)})),n.state={isLoadAce:!1},l.a.forwardRef(n.render),n}return Object(P.a)(a,[{key:"launchFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"initAce",value:function(){if(this.state.isLoadAce&&window.ace){var e=this,t=this.editor=window.ace.edit("interface-data");t.setTheme("ace/theme/chrome");var a=window.ace.require("ace/mode/json").Mode;t.session.setMode(new a);var n={identifierRegexps:[/[a-zA-Z_0-9@\-\u00A2-\uFFFF]/],getCompletions:function(e,t,a,n,l){return 0===n.length?l(null,[]):l(null,r)}},r=[{name:"mock string",value:"@string",caption:"@string",meta:"Mock-String",type:"local",score:1e3},{name:"mock number",value:"@number",caption:"@number",meta:"Mock-Number",score:1e3},{name:"mock integer",value:"@integer",caption:"@integer",meta:"Mock-Integer",score:1e3}];t.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),window.ace.require("ace/ext/language_tools").addCompleter(n),t.commands.addCommand({name:"fullscreen",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(t){var a=document.getElementById("interface-data");document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen?e.exitFullscreen():e.launchFullscreen(a)},readOnly:!0}),t.getSession().setTabSize(2),t.getSession().on("change",(function(e,t){}))}}},{key:"getValue",value:function(){return this.editor.getValue()}},{key:"componentDidUpdate",value:function(){this.initAce()}},{key:"render",value:function(){return l.a.createElement("div",{id:"interface-data",style:{width:"100%",height:"400px",position:"relative"}})}}]),a}(l.a.Component),W=a(146),Z=S.a.Option,$=x.a.TextArea;function Q(e){var t=v.a.useForm(),a=Object(j.a)(t,1)[0],n=Object(r.useState)(),c=Object(j.a)(n,2)[1];Object(r.useEffect)((function(){c({})}),[]);return l.a.createElement(v.a,{form:a,name:"horizontal_login",layout:"inline",onFinish:function(t){e.onSearch(t)}},l.a.createElement(v.a.Item,{name:"name"},l.a.createElement(x.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0"})),l.a.createElement(v.a.Item,{name:"url"},l.a.createElement(x.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740"})),l.a.createElement(v.a.Item,{shouldUpdate:!0},(function(){return l.a.createElement(k.a,{type:"primary",htmlType:"submit"},"\u67e5 \u8be2")})))}function X(e){return l.a.createElement("div",{className:"pt-20 pb-20 clearfix"},l.a.createElement("div",{style:{float:"left"}},l.a.createElement(k.a,{type:"primary",onClick:function(){return e.openDrawer()},icon:l.a.createElement(F.a,null)},"\u65b0\u5efa\u63a5\u53e3"),l.a.createElement(k.a,{type:"dashed",icon:l.a.createElement(T.a,null),className:"ml-20"},"\u5bfc\u5165Swagger \u63a5\u53e3")),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(k.a,{danger:!0,icon:l.a.createElement(I.a,null)},"\u6e05\u7a7a\u5f53\u524d\u6240\u6709\u63a5\u53e3")))}function Y(e){var t=[{value:"open",label:"\u542f\u7528\u4e2d"},{value:"close",label:"\u505c\u7528\u4e2d"}],a=[{title:"\u5e8f\u53f7",width:70,align:"center",render:function(e,t,a){return"".concat(a+1)}},{title:"\u63a5\u53e3\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u63a5\u53e3\u7c7b\u578b",dataIndex:"method",key:"method",align:"center",render:function(e){return l.a.createElement(g.a,{color:"POST"===e?"#52c41a":"#1890ff"},e.toUpperCase())}},{title:"\u63a5\u53e3\u524d\u7f00",dataIndex:"prefix",key:"prefix"},{title:"\u63a5\u53e3\u5730\u5740",dataIndex:"path",key:"path",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,{className:"pr-10"}),l.a.createElement("span",null,e))}},{title:"Mock\u542f\u7528\u72b6\u6001",dataIndex:"isOpen",key:"isOpen",width:150,align:"center",render:function(a,n,r){return l.a.createElement(S.a,{defaultValue:n.isOpen?"open":"close",style:{width:100,color:n.isOpen?"#52c41a":"#ff4d4f"},onChange:function(t){return e.onHandleTableRow("changeMock",t,n._id)}},t.map((function(e){return l.a.createElement(Z,{value:e.value,key:e.value,id:n._id},e.label)})))}},{title:"\u64cd\u4f5c",width:270,align:"center",render:function(t,a,n){return l.a.createElement(h.a,null,a.isLock?l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{type:"link",size:"small",onClick:function(){return e.onHandleTableRow("changeLock",!1,a._id)},icon:l.a.createElement(R.a,null)})):l.a.createElement(k.a,{type:"link",size:"small",onClick:function(){return e.onHandleTableRow("changeLock",!0,a._id)},icon:l.a.createElement(z.a,null)}),l.a.createElement(k.a,{size:"small",onClick:function(){return e.onHandleTableRow("look",null,a._id)},type:"primary",icon:l.a.createElement(A.a,null)},"\u67e5\u770b"),a.isLock?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{size:"small",onClick:function(){return e.onHandleTableRow("edit",null,a._id)},icon:l.a.createElement(M.a,null)},"\u7f16\u8f91"),l.a.createElement(b.a,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u63a5\u53e3\u5417?",onConfirm:function(){e.onHandleTableRow("delete",null,a._id)},okText:"\u786e\u5b9a",cancelText:"\u4e0d\u5220\u4e86"},l.a.createElement(k.a,{size:"small",danger:!0,icon:l.a.createElement(I.a,null)},"\u5220\u9664"))))}}];return l.a.createElement(E.a,{columns:a,dataSource:e.dataSource,rowKey:function(e){return e._id},pagination:!1})}var ee=function(e,t){Object(r.useImperativeHandle)(t,(function(){return{onFinish:function(){z()}}}));var a=Object(r.useRef)(null),n=v.a.useForm(),c=Object(j.a)(n,1)[0],o=Object(r.useState)(!0),i=Object(j.a)(o,2),u=i[0],s=i[1],m=Object(r.useState)(null),E=Object(j.a)(m,2),b=E[0],g=E[1],y=Object(r.useState)({}),k=Object(j.a)(y,2),O=k[0],F=k[1],T=Object(r.useState)([]),I=Object(j.a)(T,2),C=I[0],R=I[1];Object(r.useEffect)((function(){e.drawerType&&"add"!==e.drawerType&&_.a.post("/api/get-interface-detail",{id:e.drawerId}).then((function(e){if(e.data.success){var t={name:e.data.data.name,path:e.data.data.path,method:e.data.data.method,prefix:e.data.data.prefix};c.setFieldsValue(t),F(t),a.current.editor.setValue(q.a.parse(e.data.data.sourceData)),g(JSON.stringify(Object(W.mock)(e.data.data.data),null,4))}else w.a.error(e.data.errorMsg)}))}),[e.drawerType,e.drawerId,c]),Object(r.useEffect)((function(){_.a.get("/api/get-prefix-list").then((function(e){e.data.success?R(e.data.data):w.a.error(e.data.errorMsg)}))}),[R]);var z=function(){c.validateFields().then((function(t){var n=function(){if(!a.current.getValue())return w.a.error("\u8bf7\u8f93\u5165\u54cd\u5e94\u6570\u636e"),!1;try{return q.a.parse(a.current.getValue())}catch(e){return console.log(e),w.a.error("json \u89e3\u6790\u51fa\u9519"),!1}}();if(n){var r,l={name:t.name,path:t.path,data:Object(W.mock)(n),sourceData:q.a.stringify(a.current.getValue()),method:t.method,prefix:t.prefix,isOpen:!0};e.drawerId?(r="/api/update-interface",l.id=e.drawerId):r="/api/add-interface",_.a.post(r,l).then((function(t){t.data.success?(e.onSaveSuccess(),w.a.success("\u4fdd\u5b58\u6210\u529f")):w.a.error(t.data.errorMsg)}))}})).catch((function(e){console.log(e)}))};return l.a.createElement(d.a,null,l.a.createElement(p.a,{span:10,className:"pr-10"},l.a.createElement(v.a,{layout:{labelCol:{span:0},wrapperCol:{span:24}},form:c,name:"basic",initialValues:{name:"",path:"",method:"GET",prefix:""}},l.a.createElement("h4",null,"\u63a5\u53e3\u540d\u79f0"),"look"!==e.drawerType?l.a.createElement(v.a.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0!"}]},l.a.createElement(x.a,{autoComplete:"off"})):l.a.createElement("ul",null,l.a.createElement("li",null,O.name)),l.a.createElement("h4",null,"\u8bf7\u6c42\u65b9\u5f0f"),"look"!==e.drawerType?l.a.createElement(v.a.Item,{name:"method"},l.a.createElement(f.a.Group,{buttonStyle:"solid"},l.a.createElement(f.a,{value:"GET"},"GET"),l.a.createElement(f.a,{value:"POST"},"POST"),l.a.createElement(f.a,{value:"PUT"},"PUT"),l.a.createElement(f.a,{value:"DELETE"},"DELETE"))):l.a.createElement("ul",null,l.a.createElement("li",null,O.method)),l.a.createElement("h4",null,"\u5de5\u7a0b\u524d\u7f00"),"look"!==e.drawerType?l.a.createElement(v.a.Item,{name:"prefix"},l.a.createElement(S.a,null,l.a.createElement(S.a.Option,{value:""},"\u65e0\u63a5\u53e3\u524d\u7f00"),C.map((function(e){return l.a.createElement(S.a.Option,{value:e.code},e.code)})))):l.a.createElement("ul",null,l.a.createElement("li",null,O.prefix)),l.a.createElement("h4",null,"\u63a5\u53e3\u5730\u5740"),"look"!==e.drawerType?l.a.createElement(v.a.Item,{name:"path",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740!"}]},l.a.createElement(x.a,{autoComplete:"off"})):l.a.createElement("ul",null,l.a.createElement("li",null,O.path)))),l.a.createElement(p.a,{span:14,className:"pl-10"},l.a.createElement("h4",null,l.a.createElement("span",{className:"mr-10"},"\u54cd\u5e94\u6570\u636e"),"look"!==e.drawerType?l.a.createElement("a",{href:"#!",style:{color:"#6c757d"}},"\u5982\u4f55\u751f\u6210\u968f\u673a\u6570\u636e?"):null),"look"!==e.drawerType?l.a.createElement("div",{className:"clearfix"},l.a.createElement(f.a.Group,{className:"float-left",defaultValue:"1",size:"small",buttonStyle:"solid",onChange:function(e){return"1"===e.target.value?s(!0):s(!1)}},l.a.createElement(f.a.Button,{value:"1"},"\u7f16\u8f91"),l.a.createElement(f.a.Button,{value:"2"},"\u9884\u89c8")),l.a.createElement("div",{className:"float-right"},l.a.createElement(h.a,null,l.a.createElement("a",{href:"#!"},"\u521d\u59cb\u57fa\u7840\u6570\u636e"),l.a.createElement("a",{href:"#!"},"\u521d\u59cb\u57fa\u7840\u5206\u9875\u6570\u636e")))):null,l.a.createElement("div",{className:"pt-10"},l.a.createElement("div",{style:{display:"look"!==e.drawerType&&u?"block":"none",border:"1px #eee solid"}},l.a.createElement(J,{ref:a})),l.a.createElement("div",{style:{display:"look"!==e.drawerType&&u?"none":"block"}},l.a.createElement($,{value:b,style:{height:"400px",backgroundColor:"#f2f2f2"},readOnly:!0})))))};ee=Object(r.forwardRef)(ee);var te=[{path:"/",component:function(e){var t=Object(r.useState)({}),a=Object(j.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)([]),i=Object(j.a)(o,2),u=i[0],s=i[1],m=Object(r.useState)(!1),d=Object(j.a)(m,2),p=d[0],f=d[1],E=Object(r.useState)(null),h=Object(j.a)(E,2),b=h[0],g=h[1],v=Object(r.useState)(null),x=Object(j.a)(v,2),S=x[0],F=x[1],T=Object(r.useState)({}),I=Object(j.a)(T,2),C=(I[0],I[1]),R=function(e,t,a){var n={name:e,url:t,page:1,rows:20};_.a.post("/api/get-interface-list",n).then((function(e){e.data.success&&s(e.data.data.list)}))},z=Object(r.useRef)(null);function A(e,t,a){console.log(e,t,a),"changeMock"===e?_.a.post("/api/change-interface-mock-status",{id:a,isOpen:"open"===t}).then((function(e){if(e.data.success){w.a.success("open"===t?"\u6210\u529f\u542f\u7528":"\u63a5\u53e3\u5df2\u505c\u7528");var n=u.map((function(e){return a===e._id?Object.assign(e,{isOpen:"open"===t}):e}));s(n)}else w.a.error(e.data.errorMsg)})):"changeLock"===e?_.a.post("/api/change-interface-lock-status",{id:a,isLock:t}).then((function(e){if(e.data.success){w.a.success(t?"\u63a5\u53e3\u5df2\u9501\uff0c\u5c06\u65e0\u6cd5\u7f16\u8f91\u4e0e\u5220\u9664\u64cd\u4f5c":"\u63a5\u53e3\u5df2\u89e3\u9501");var n=u.map((function(e){return a===e._id?Object.assign(e,{isLock:t}):e}));s(n)}else w.a.error(e.data.errorMsg)})):"delete"===e?_.a.post("/api/delete-interface",{id:a}).then((function(e){e.data.success&&(w.a.success("\u5220\u9664\u6210\u529f"),R(n.name,n.url))})):"edit"===e?(g("edit"),F(a),f(!0)):"look"===e?(g("look"),F(a),f(!0)):"add"===e&&(g("add"),F(null),f(!0))}return Object(r.useEffect)((function(){R(n.name,n.url)}),[n]),Object(r.useEffect)((function(){_.a.get("/api/get-config").then((function(t){t.data.success?(C(t.data.data),t.data.data.target||O.a.warning({title:"\u8b66\u544a",keyboard:!1,centered:!0,maskClosable:!1,okText:"\u53bb\u8bbe\u7f6e",content:l.a.createElement("div",null,l.a.createElement("p",null,"\u68c0\u6d4b\u5230\u4f60\u8fd8\u6ca1\u6709\u7ef4\u62a4\u4ee3\u7406\u5730\u5740, \u8bf7\u5148\u7ef4\u62a4\u9879\u76ee\u4ee3\u7406\u5730\u5740")),onOk:function(){e.history.push("/project")}})):w.a.error(t.data.errorMsg)}))}),[C,e.history]),l.a.createElement("div",null,l.a.createElement(Q,{onSearch:function(e){c(e)}}),l.a.createElement(X,{initSearch:function(){R()},openDrawer:function(){A("add",null,null)}}),l.a.createElement(Y,{dataSource:u,onHandleTableRow:A}),l.a.createElement(y.a,{title:"add"===b?"\u65b0\u589e\u63a5\u53e3":"edit"===b?"\u7f16\u8f91\u63a5\u53e3":"\u67e5\u770b\u63a5\u53e3",placement:"left",destroyOnClose:!0,forceRender:!0,onClose:function(){return f(!1)},visible:p,width:"80%",footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(k.a,{onClick:function(){return f(!1)},style:{marginRight:8}},"\u5173\u95ed"),"look"!==b?l.a.createElement(k.a,{type:"primary",onClick:function(){z.current.onFinish()}},"\u4fdd\u5b58"):null)},l.a.createElement(ee,{drawerType:b,drawerId:S,ref:z,onSaveSuccess:function(){f(!1),setTimeout((function(){R(n.name,n.url)}),320)}})))},exact:!0,title:"\u63a5\u53e3\u5217\u8868"},{path:"/base-data",component:function(){return l.a.createElement("div",null,"BaseData")},title:"\u54cd\u5e94\u6570\u636e\u7ef4\u62a4"},{path:"/prefix",component:function(){return l.a.createElement("div",null,"Prefix")},title:"\u63a5\u53e3\u524d\u7f00\u7ef4\u62a4"},{path:"/project",component:function(){return l.a.createElement("div",null,"Project")},title:"\u9879\u76ee\u914d\u7f6e\u7ef4\u62a4"},{path:"/document",component:function(){return l.a.createElement("div",null,"Document")},title:"\u6587\u6863\u8bf4\u660e"}];var ae=Object(m.f)((function(e){for(var t="1",a=0;a<te.length;a++)te[a].path===e.history.location.pathname&&(t="".concat(a+1));return l.a.createElement(r.Fragment,null,l.a.createElement("div",{style:{float:"left",fontSize:"20px",marginRight:"20px",height:"64px"}},"SNAKE-API ",l.a.createElement("small",null,"mini")),l.a.createElement(u.a,{mode:"horizontal",defaultSelectedKeys:[t]},l.a.createElement(u.a.Item,{key:"1"},l.a.createElement(s.b,{to:"/"},"\u63a5\u53e3\u5217\u8868")),l.a.createElement(u.a.Item,{key:"2"},l.a.createElement(s.b,{to:"/base-data"},"\u54cd\u5e94\u6570\u636e\u7ef4\u62a4")),l.a.createElement(u.a.Item,{key:"3"},l.a.createElement(s.b,{to:"/prefix"},"\u63a5\u53e3\u524d\u7f00\u7ef4\u62a4")),l.a.createElement(u.a.Item,{key:"4"},l.a.createElement(s.b,{to:"/project"},"\u9879\u76ee\u914d\u7f6e\u7ef4\u62a4")),l.a.createElement(u.a.Item,{key:"5"},l.a.createElement(s.b,{to:"/document"},"\u6587\u6863\u8bf4\u660e"))))})),ne=(a(454),a(153));function re(e){return l.a.createElement("div",{style:{padding:"66px 20px 0 20px",minHeight:"calc(100vh - 42px)"}},l.a.createElement(ne.a,{style:{padding:"10px 0"}},l.a.createElement(ne.a.Item,null,"\u63a5\u53e3\u5217\u8868")),e.children)}var le=i.a.Header,ce=i.a.Footer,oe=i.a.Content;function ie(e){return document.title=e.title,l.a.createElement(m.a,{exact:e.exact,path:e.path,render:function(t){return l.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})}var ue=function(){return l.a.createElement(s.a,null,l.a.createElement(i.a,null,l.a.createElement(le,{className:"header",style:{position:"fixed",zIndex:1,width:"100%",padding:"0 20px"}},l.a.createElement(ae,null)),l.a.createElement(oe,null,l.a.createElement(re,null,l.a.createElement(m.c,null,te.map((function(e,t){return l.a.createElement(ie,Object.assign({key:e.path},e))}))))),l.a.createElement(ce,{style:{textAlign:"center",padding:"10px"}},"\u6280\u672f\u652f\u6301\uff1aseebin | \u9489\u9489\u4ea4\u6d41\u7fa4:21958681")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(218);o.a.render(l.a.createElement(n.a,{locale:se.a},l.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[224,1,2]]]);
//# sourceMappingURL=main.85fa99f9.chunk.js.map
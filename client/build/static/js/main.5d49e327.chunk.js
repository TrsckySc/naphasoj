(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{232:function(e,a,t){e.exports=t(451)},239:function(e,a,t){},451:function(e,a,t){"use strict";t.r(a);t(233);var n=t(4),r=t(0),c=t.n(r),l=t(3),o=t.n(l),i=(t(239),t(240),t(101)),u=(t(166),t(23)),s=t(65),m=t(62),d=(t(168),t(129)),f=(t(169),t(87)),p=(t(135),t(24)),E=(t(156),t(82)),g=(t(173),t(126)),h=(t(157),t(85)),b=(t(256),t(229)),k=(t(102),t(12)),y=(t(259),t(227)),v=(t(46),t(5)),O=(t(88),t(7)),j=(t(136),t(61)),w=t(13),x=(t(103),t(27)),C=(t(172),t(38)),S=t(452),F=t(459),T=t(458),I=t(457),M=t(456),N=t(455),R=t(460),V=t(454),_=t(453),z=t(16),A=t.n(z),q=t(63),L=t.n(q),H=t(203),P=t(204),D=t(230),K=t(226),B=t(160),G=t.n(B),U=t(205);function J(e,a){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=a,r.onload=function(){t()},r.onerror=function(){n()},document.body.appendChild(r)}))}var W=function(e){Object(D.a)(t,e);var a=Object(K.a)(t);function t(e){var n;return Object(H.a)(this,t),n=a.call(this,e),function(e){var a=!0;return e.forEach(function(){var e=Object(U.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t,!1);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),a=!1;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(a){return e.apply(this,arguments)}}()),new Promise((function(e,t){a?e():t()}))}(["./lib/ace-1.4.4/src/ace.js","./lib/ace-1.4.4/src/theme-chrome.js","./lib/ace-1.4.4/src/mode-json.js","./lib/ace-1.4.4/src/snippets/json.js","./lib/ace-1.4.4/src/ext-language_tools.js"]).then((function(){n.setState({isLoadAce:!0})})).catch((function(e){console.error(">>>>>>",e)})),n.state={isLoadAce:!1},c.a.forwardRef(n.render),n}return Object(P.a)(t,[{key:"launchFullscreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exitFullscreen",value:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},{key:"initAce",value:function(){if(this.state.isLoadAce&&window.ace){var e=this,a=this.editor=window.ace.edit("interface-data");a.setTheme("ace/theme/chrome");var t=window.ace.require("ace/mode/json").Mode;a.session.setMode(new t);var n={identifierRegexps:[/[a-zA-Z_0-9@\-\u00A2-\uFFFF]/],getCompletions:function(e,a,t,n,c){return 0===n.length?c(null,[]):c(null,r)}},r=[{name:"mock string",value:"@string",caption:"@string",meta:"Mock-String",type:"local",score:1e3},{name:"mock number",value:"@number",caption:"@number",meta:"Mock-Number",score:1e3},{name:"mock integer",value:"@integer",caption:"@integer",meta:"Mock-Integer",score:1e3}];a.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),window.ace.require("ace/ext/language_tools").addCompleter(n),a.commands.addCommand({name:"fullscreen",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(a){var t=document.getElementById("interface-data");document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen?e.exitFullscreen():e.launchFullscreen(t)},readOnly:!0}),a.getSession().setTabSize(2),a.getSession().on("change",(function(e,a){}))}}},{key:"getValue",value:function(){return this.editor.getValue()}},{key:"componentDidUpdate",value:function(){this.initAce()}},{key:"render",value:function(){return c.a.createElement("div",{id:"interface-data",style:{width:"100%",height:this.props.height||"300px",position:"relative",lineHeight:"1.5",fontSize:"14px",border:"1px #eee solid"}})}}]),t}(c.a.Component),Y=t(93);var Z=C.a.Option,$=x.a.TextArea;function Q(e){var a=k.a.useForm(),t=Object(w.a)(a,1)[0],n=Object(r.useState)(),l=Object(w.a)(n,2)[1];Object(r.useEffect)((function(){l({})}),[]);var o=function(){A.a.post("/api/update-config-mock",{id:e.projectConfig._id,mock:!e.projectConfig.mock}).then((function(a){a.data.success?(O.a.success(e.projectConfig.mock?"\u5df2\u505c\u7528\u9879\u76eeMock\u529f\u80fd":"\u5df2\u542f\u7528\u9879\u76eeMock\u529f\u80fd"),e.updateProjectConfig()):O.a.error(a.data.errorMsg)}))};return c.a.createElement("div",{className:"clearfix"},c.a.createElement(k.a,{form:t,name:"horizontal_login",layout:"inline",onFinish:function(a){e.onSearch(a)},className:"float-left"},c.a.createElement(k.a.Item,{name:"name"},c.a.createElement(x.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0"})),c.a.createElement(k.a.Item,{name:"url"},c.a.createElement(x.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740"})),c.a.createElement(k.a.Item,{shouldUpdate:!0},(function(){return c.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u67e5 \u8be2")}))),c.a.createElement("div",{className:"float-right cursor-pointer",style:{color:e.projectConfig.mock?"#28a745":"#dc3545"},onClick:function(){e.projectConfig.mock?j.a.confirm({title:"\u60a8\u786e\u8ba4\u8981\u505c\u7528Mock\u529f\u80fd\u5417\uff1f",content:"\u8bbe\u7f6e\u540e\u6240\u6709Mock\u63a5\u53e3\u5c06\u4e0d\u53ef\u7528, \u670d\u52a1\u53ea\u4fdd\u7559\u53cd\u5411\u4ee3\u7406\u529f\u80fd",icon:c.a.createElement(S.a,null),okType:"danger",onOk:function(){o()}}):o()}},c.a.createElement("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"4px",marginRight:"5px",backgroundColor:e.projectConfig.mock?"#28a745":"#dc3545"}}),e.projectConfig.mock?c.a.createElement("span",null,"Mock \u542f\u7528\u4e2d..."):c.a.createElement("span",null,"Mock \u505c\u7528\u4e2d...")))}function X(e){return c.a.createElement("div",{className:"pt-20 pb-20 clearfix"},c.a.createElement("div",{style:{float:"left"}},c.a.createElement(v.a,{type:"primary",onClick:function(){return e.openDrawer()},icon:c.a.createElement(F.a,null)},"\u65b0\u5efa\u63a5\u53e3"),c.a.createElement(v.a,{type:"dashed",icon:c.a.createElement(T.a,null),className:"ml-20"},"\u5bfc\u5165Swagger \u63a5\u53e3")),c.a.createElement("div",{style:{float:"right"}},c.a.createElement(v.a,{danger:!0,onClick:function(){return e.deleteAllInterface()},icon:c.a.createElement(I.a,null)},"\u6e05\u7a7a\u5f53\u524d\u6240\u6709\u63a5\u53e3")))}function ee(e){var a=[{value:"open",label:"\u542f\u7528\u4e2d"},{value:"close",label:"\u505c\u7528\u4e2d"}],t=[{title:"\u5e8f\u53f7",width:70,align:"center",render:function(e,a,t){return"".concat(t+1)}},{title:"\u63a5\u53e3\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u63a5\u53e3\u7c7b\u578b",dataIndex:"method",key:"method",align:"center",render:function(e){return c.a.createElement(b.a,{color:"POST"===e?"#52c41a":"#1890ff"},e.toUpperCase())}},{title:"\u63a5\u53e3\u524d\u7f00",dataIndex:"prefix",key:"prefix"},{title:"\u63a5\u53e3\u5730\u5740",dataIndex:"path",key:"path",render:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{onClick:function(){return function(e){var a=document.activeElement,t=document.createElement("input");document.body.appendChild(t),t.style.opacity=0,t.value=e;var n=window.scrollY;t.focus(),t.setSelectionRange(0,t.value.length),document.execCommand("copy",!0),a.focus(),document.body.removeChild(t),window.scrollTo(0,n),O.a.info("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")}(e)},className:"pr-10"}),c.a.createElement("span",null,e))}},{title:"Mock\u542f\u7528\u72b6\u6001",dataIndex:"isOpen",key:"isOpen",width:150,align:"center",render:function(t,n,r){return c.a.createElement(C.a,{defaultValue:n.isOpen?"open":"close",style:{width:100,color:n.isOpen?"#52c41a":"#ff4d4f"},onChange:function(a){return e.onHandleTableRow("changeMock",a,n._id)}},a.map((function(e){return c.a.createElement(Z,{value:e.value,key:e.value,id:n._id},e.label)})))}},{title:"\u64cd\u4f5c",width:270,align:"center",render:function(a,t,n){return c.a.createElement(g.a,null,t.isLock?c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{type:"link",size:"small",onClick:function(){return e.onHandleTableRow("changeLock",!1,t._id)},icon:c.a.createElement(N.a,null)})):c.a.createElement(v.a,{type:"link",size:"small",onClick:function(){return e.onHandleTableRow("changeLock",!0,t._id)},icon:c.a.createElement(R.a,null)}),c.a.createElement(v.a,{size:"small",onClick:function(){return e.onHandleTableRow("look",null,t._id)},type:"primary",icon:c.a.createElement(V.a,null)},"\u67e5\u770b"),t.isLock?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{size:"small",onClick:function(){return e.onHandleTableRow("edit",null,t._id)},icon:c.a.createElement(_.a,null)},"\u7f16\u8f91"),c.a.createElement(h.a,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u63a5\u53e3\u5417?",onConfirm:function(){e.onHandleTableRow("delete",null,t._id)},okText:"\u786e\u5b9a",cancelText:"\u4e0d\u5220\u4e86"},c.a.createElement(v.a,{size:"small",danger:!0,icon:c.a.createElement(I.a,null)},"\u5220\u9664"))))}}];return c.a.createElement(E.a,{columns:t,dataSource:e.dataSource,rowKey:function(e){return e._id},pagination:!1})}var ae=function(e,a){Object(r.useImperativeHandle)(a,(function(){return{onFinish:function(){_()}}}));var t=Object(r.useRef)(null),n=k.a.useForm(),l=Object(w.a)(n,1)[0],o=Object(r.useState)(!0),i=Object(w.a)(o,2),u=i[0],s=i[1],m=Object(r.useState)(null),E=Object(w.a)(m,2),g=E[0],h=E[1],b=Object(r.useState)({}),y=Object(w.a)(b,2),v=y[0],j=y[1],S=Object(r.useState)([]),F=Object(w.a)(S,2),T=F[0],I=F[1],M=Object(r.useState)([]),N=Object(w.a)(M,2),R=N[0],V=N[1];Object(r.useEffect)((function(){e.drawerType&&"add"!==e.drawerType&&A.a.post("/api/get-interface-detail",{id:e.drawerId}).then((function(e){if(e.data.success){var a={name:e.data.data.name,path:e.data.data.path,method:e.data.data.method,prefix:e.data.data.prefix};l.setFieldsValue(a),j(a),t.current.editor.setValue(L.a.parse(e.data.data.sourceData)),h(JSON.stringify(Object(Y.mock)(e.data.data.data),null,4))}else O.a.error(e.data.errorMsg)}))}),[e.drawerType,e.drawerId,l]),Object(r.useEffect)((function(){A.a.get("/api/get-prefix-list").then((function(e){e.data.success?I(e.data.data):O.a.error(e.data.errorMsg)})),A.a.get("/api/get-base-list").then((function(e){e.data.success?V(e.data.data):O.a.error(e.data.errorMsg)}))}),[I,V]);var _=function(){l.validateFields().then((function(a){var n=function(){if(!t.current.getValue())return O.a.error("\u8bf7\u8f93\u5165\u54cd\u5e94\u6570\u636e"),!1;try{return L.a.parse(t.current.getValue())}catch(e){return console.log(e),O.a.error("json \u89e3\u6790\u51fa\u9519"),!1}}();if(n){var r,c={name:a.name,path:a.path,data:Object(Y.mock)(n),sourceData:L.a.stringify(t.current.getValue()),method:a.method,prefix:a.prefix,isOpen:!0};e.drawerId?(r="/api/update-interface",c.id=e.drawerId):r="/api/add-interface",A.a.post(r,c).then((function(a){a.data.success?(e.onSaveSuccess(),O.a.success("\u4fdd\u5b58\u6210\u529f")):O.a.error(a.data.errorMsg)}))}})).catch((function(e){console.log(e)}))};return c.a.createElement(d.a,null,c.a.createElement(f.a,{span:10,className:"pr-10"},c.a.createElement(k.a,{layout:{labelCol:{span:0},wrapperCol:{span:24}},form:l,name:"basic",initialValues:{name:"",path:"",method:"GET",prefix:""}},c.a.createElement("h4",null,"\u63a5\u53e3\u540d\u79f0"),"look"!==e.drawerType?c.a.createElement(k.a.Item,{name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0!"}]},c.a.createElement(x.a,{autoComplete:"off"})):c.a.createElement("ul",null,c.a.createElement("li",null,v.name)),c.a.createElement("h4",null,"\u8bf7\u6c42\u65b9\u5f0f"),"look"!==e.drawerType?c.a.createElement(k.a.Item,{name:"method"},c.a.createElement(p.a.Group,{buttonStyle:"solid"},c.a.createElement(p.a,{value:"GET"},"GET"),c.a.createElement(p.a,{value:"POST"},"POST"),c.a.createElement(p.a,{value:"PUT"},"PUT"),c.a.createElement(p.a,{value:"DELETE"},"DELETE"))):c.a.createElement("ul",null,c.a.createElement("li",null,v.method)),c.a.createElement("h4",null,"\u5de5\u7a0b\u524d\u7f00"),"look"!==e.drawerType?c.a.createElement(k.a.Item,{name:"prefix"},c.a.createElement(C.a,null,c.a.createElement(C.a.Option,{value:""},"\u65e0\u63a5\u53e3\u524d\u7f00"),T.map((function(e){return c.a.createElement(C.a.Option,{value:e.code,key:e.code},e.code)})))):c.a.createElement("ul",null,c.a.createElement("li",null,v.prefix)),c.a.createElement("h4",null,"\u63a5\u53e3\u5730\u5740"),"look"!==e.drawerType?c.a.createElement(k.a.Item,{name:"path",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740!"}]},c.a.createElement(x.a,{autoComplete:"off"})):c.a.createElement("ul",null,c.a.createElement("li",null,v.path)))),c.a.createElement(f.a,{span:14,className:"pl-10"},c.a.createElement("h4",null,c.a.createElement("span",{className:"mr-10"},"\u54cd\u5e94\u6570\u636e"),"look"!==e.drawerType?c.a.createElement("a",{href:"#!",style:{color:"#6c757d"}},"\u5982\u4f55\u751f\u6210\u968f\u673a\u6570\u636e?"):null),"look"!==e.drawerType?c.a.createElement("div",{className:"clearfix"},c.a.createElement(p.a.Group,{className:"float-left",defaultValue:"1",size:"small",buttonStyle:"solid",onChange:function(e){return"1"===e.target.value?s(!0):s(!1)}},c.a.createElement(p.a.Button,{value:"1"},"\u7f16\u8f91"),c.a.createElement(p.a.Button,{value:"2"},"\u9884\u89c8")),c.a.createElement("div",{className:"float-right"},c.a.createElement("span",{className:"mr-10"},"\u5feb\u6377\u6570\u636e\u6a21\u7248:"),c.a.createElement(C.a,{defaultValue:"",style:{width:200},size:"small",onChange:function(e){t.current.editor.setValue(""===e?"":JSON.stringify(R[e].data,null,2))}},c.a.createElement(Z,{value:""},"\u4e0d\u4f7f\u7528\u54cd\u5e94\u6570\u636e\u6a21\u7248"),R.map((function(e,a){return c.a.createElement(Z,{value:a,title:e.name,key:a},e.name)}))))):null,c.a.createElement("div",{className:"pt-10"},c.a.createElement("div",{style:{display:"look"!==e.drawerType&&u?"block":"none"}},c.a.createElement(W,{ref:t,height:"400px"})),c.a.createElement("div",{style:{display:"look"!==e.drawerType&&u?"none":"block"}},c.a.createElement($,{value:g,style:{height:"400px",backgroundColor:"#f2f2f2"},readOnly:!0})))))};ae=Object(r.forwardRef)(ae);var te=x.a.TextArea;var ne={labelCol:{span:8},wrapperCol:{span:16}};var re={labelCol:{span:3},wrapperCol:{span:8}},ce={wrapperCol:{offset:3,span:8}};var le=[{path:"/",component:function(e){var a=Object(r.useState)({}),t=Object(w.a)(a,2),n=t[0],l=t[1],o=Object(r.useState)([]),i=Object(w.a)(o,2),u=i[0],s=i[1],m=Object(r.useState)(!1),d=Object(w.a)(m,2),f=d[0],p=d[1],E=Object(r.useState)(null),g=Object(w.a)(E,2),h=g[0],b=g[1],k=Object(r.useState)(null),x=Object(w.a)(k,2),C=x[0],F=x[1],T=Object(r.useState)({}),I=Object(w.a)(T,2),M=I[0],N=I[1],R=function(e,a,t){var n={name:e,url:a,page:1,rows:20};A.a.post("/api/get-interface-list",n).then((function(e){e.data.success&&s(e.data.data.list)}))},V=Object(r.useRef)(null);Object(r.useEffect)((function(){R(n.name,n.url)}),[n]);var _=Object(r.useCallback)((function(){A.a.get("/api/get-config").then((function(a){a.data.success?(N(a.data.data),a.data.data.target||j.a.warning({title:"\u8b66\u544a",keyboard:!1,centered:!0,maskClosable:!1,okText:"\u53bb\u8bbe\u7f6e",content:c.a.createElement("div",null,c.a.createElement("p",null,"\u68c0\u6d4b\u5230\u4f60\u8fd8\u6ca1\u6709\u7ef4\u62a4\u4ee3\u7406\u5730\u5740, \u8bf7\u5148\u7ef4\u62a4\u9879\u76ee\u4ee3\u7406\u5730\u5740")),onOk:function(){e.history.push("/project")}})):O.a.error(a.data.errorMsg)}))}),[N,e.history]);function z(e,a,t){"changeMock"===e?A.a.post("/api/change-interface-mock-status",{id:t,isOpen:"open"===a}).then((function(e){if(e.data.success){O.a.success("open"===a?"Mock\u72b6\u6001\u5f00\u542f\u6210\u529f,\u4f60\u53ef\u4ee5\u4f7f\u7528Mock\u6570\u636e\u4e86":"Mock\u72b6\u6001\u5df2\u505c\u7528,\u4f60\u53ef\u4ee5\u4f7f\u7528\u771f\u5b9e\u7684\u63a5\u53e3\u6570\u636e\u4e86");var n=u.map((function(e){return t===e._id?Object.assign(e,{isOpen:"open"===a}):e}));s(n)}else O.a.error(e.data.errorMsg)})):"changeLock"===e?A.a.post("/api/change-interface-lock-status",{id:t,isLock:a}).then((function(e){if(e.data.success){O.a.success(a?"\u63a5\u53e3\u5df2\u9501\uff0c\u5c06\u65e0\u6cd5\u7f16\u8f91\u4e0e\u5220\u9664\u64cd\u4f5c":"\u63a5\u53e3\u5df2\u89e3\u9501");var n=u.map((function(e){return t===e._id?Object.assign(e,{isLock:a}):e}));s(n)}else O.a.error(e.data.errorMsg)})):"delete"===e?A.a.post("/api/delete-interface",{id:t}).then((function(e){e.data.success&&(O.a.success("\u5220\u9664\u6210\u529f"),R(n.name,n.url))})):"edit"===e?(b("edit"),F(t),p(!0)):"look"===e?(b("look"),F(t),p(!0)):"add"===e&&(b("add"),F(null),p(!0))}return Object(r.useEffect)((function(){_()}),[_]),c.a.createElement("div",null,c.a.createElement(Q,{onSearch:function(e){l(e)},projectConfig:M,updateProjectConfig:_}),c.a.createElement(X,{initSearch:function(){R()},openDrawer:function(){z("add",null,null)},deleteAllInterface:function(){j.a.confirm({title:"\u60a8\u786e\u8ba4\u8981\u5220\u9664\u6240\u6709\u63a5\u53e3\uff1f",content:"\u5df2\u7ecf\u88ab\u9501\u5b9a\u7684\u63a5\u53e3\u4e0d\u4f1a\u88ab\u5220\u9664",icon:c.a.createElement(S.a,null),okType:"danger",okText:"\u5220\u9664",onOk:function(){A.a.get("/api/delete-all-interface").then((function(e){e.data.success?(O.a.success("\u5df2\u6210\u529f\u6e05\u7a7a\u6240\u6709\u672a\u88ab\u9501\u5b9a\u7684\u63a5\u53e3"),R(n.name,n.url)):O.a.error(e.data.errorMsg)}))}})}}),c.a.createElement(ee,{dataSource:u,onHandleTableRow:z}),c.a.createElement(y.a,{title:"add"===h?"\u65b0\u589e\u63a5\u53e3":"edit"===h?"\u7f16\u8f91\u63a5\u53e3":"\u67e5\u770b\u63a5\u53e3",placement:"left",destroyOnClose:!0,forceRender:!0,onClose:function(){return p(!1)},visible:f,width:"80%",footer:c.a.createElement("div",{style:{textAlign:"right"}},c.a.createElement(v.a,{onClick:function(){return p(!1)},style:{marginRight:8}},"\u5173\u95ed"),"look"!==h?c.a.createElement(v.a,{type:"primary",onClick:function(){V.current.onFinish()}},"\u4fdd\u5b58"):null)},c.a.createElement(ae,{drawerType:h,drawerId:C,ref:V,onSaveSuccess:function(){p(!1),setTimeout((function(){R(n.name,n.url)}),320)}})))},exact:!0,title:"\u63a5\u53e3\u5217\u8868"},{path:"/base-data",component:function(){var e=Object(r.useState)([]),a=Object(w.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)(!1),o=Object(w.a)(l,2),i=o[0],u=o[1],s=Object(r.useState)(!1),m=Object(w.a)(s,2),p=m[0],b=m[1],y=Object(r.useState)(null),C=Object(w.a)(y,2),S=C[0],F=C[1],T=Object(r.useRef)(null),M=k.a.useForm(),N=Object(w.a)(M,1)[0],R=[{title:"\u5e8f\u53f7",width:70,align:"center",render:function(e,a,t){return"".concat(t+1)}},{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u8bf4\u660e",dataIndex:"remark",key:"remark"},{title:"\u64cd\u4f5c",width:270,align:"center",render:function(e,a,t){return c.a.createElement(g.a,null,c.a.createElement(v.a,{size:"small",onClick:function(){return V(a._id)},type:"primary",icon:c.a.createElement(_.a,null)},"\u7f16\u8f91"),c.a.createElement(h.a,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6a21\u677f\u6570\u636e\u5417?",onConfirm:function(){z(a._id)},okText:"\u786e\u5b9a",cancelText:"\u4e0d\u5220\u4e86"},c.a.createElement(v.a,{size:"small",danger:!0,icon:c.a.createElement(I.a,null)},"\u5220\u9664")))}}];Object(r.useEffect)((function(){S&&i&&A.a.post("/api/get-base-data-by-id",{id:S}).then((function(e){e.data.success?(N.setFieldsValue({name:e.data.data.name,remark:e.data.data.remark}),T.current.editor.setValue(L.a.parse(e.data.data.aceData))):O.a.error(e.data.errorMsg)}))}),[S,N,i]);var V=function(e){F(e),u(!0)},z=function(e){A.a.post("/api/delete-base-data",{id:e}).then((function(e){e.data.success?(O.a.success("\u5220\u9664\u6210\u529f"),q()):O.a.error(e.data.errorMsg)}))},q=function(){A.a.get("/api/get-base-list").then((function(e){e.data.success?n(e.data.data):O.a.error(e.data.errorMsg)}))};return Object(r.useEffect)((function(){q()}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"pb-10"},c.a.createElement(v.a,{type:"primary",onClick:function(){u(!0),F(null)}},"\u65b0\u589e")),c.a.createElement(E.a,{dataSource:t,columns:R,rowKey:function(e){return e._id},pagination:!1}),c.a.createElement(j.a,{title:"\u65b0\u589e\u54cd\u5e94\u6570\u636e",visible:i,onOk:function(){N.validateFields().then((function(e){var a=function(){if(!T.current.getValue())return O.a.error("\u8bf7\u8f93\u5165\u54cd\u5e94\u6570\u636e"),!1;try{return L.a.parse(T.current.getValue())}catch(e){return console.log(e),O.a.error("json \u89e3\u6790\u51fa\u9519"),!1}}();if(a){var t={name:e.name,remark:e.remark,data:Object(Y.mock)(a),aceData:L.a.stringify(T.current.getValue())};S&&(t.id=S),b(!0),A.a.post("/api/update-base-data",t).then((function(e){e.data.success?(N.resetFields(),b(!1),T.current.editor.setValue(""),O.a.success("\u4fdd\u5b58\u6210\u529f"),q(),u(!1)):O.a.error(e.data.errorMsg)}))}})).catch((function(e){return console.log(e)}))},onCancel:function(){N.resetFields(),b(!1),T.current.editor.setValue(""),u(!1)},centered:!0,confirmLoading:p,forceRender:!0,width:900},c.a.createElement(d.a,null,c.a.createElement(f.a,{span:8,className:"pr-10"},c.a.createElement(k.a,{form:N,name:"basic",layout:"vertical",initialValues:{name:"",remark:""}},c.a.createElement(k.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u79f0"}]},c.a.createElement(x.a,null)),c.a.createElement(k.a.Item,{label:"\u8bf4\u660e",name:"remark"},c.a.createElement(te,{autoComplete:"off"})))),c.a.createElement(f.a,{span:16},c.a.createElement("h4",null,"\u54cd\u5e94\u6570\u636e"),c.a.createElement(W,{ref:T,height:"340px"})))))},title:"\u54cd\u5e94\u6570\u636e\u7ef4\u62a4"},{path:"/prefix",component:function(){var e=Object(r.useState)([]),a=Object(w.a)(e,2),t=a[0],n=a[1],l=Object(r.useState)(!1),o=Object(w.a)(l,2),i=o[0],u=o[1],s=Object(r.useState)(!1),m=Object(w.a)(s,2),d=m[0],f=m[1],p=k.a.useForm(),g=Object(w.a)(p,1)[0],b=[{title:"\u5e8f\u53f7",width:70,align:"center",render:function(e,a,t){return"".concat(t+1)}},{title:"\u524d\u7f00",dataIndex:"code",key:"code"},{title:"\u8bf4\u660e",dataIndex:"remark",key:"remark"},{title:"\u64cd\u4f5c",width:270,align:"center",render:function(e,a,t){return c.a.createElement(h.a,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u524d\u7f00\u5417?",onConfirm:function(){var e;e=a._id,A.a.post("/api/delete-prefix",{id:e}).then((function(e){e.data.success?(O.a.success("\u5220\u9664\u6210\u529f"),y()):O.a.error(e.data.errorMsg)}))},okText:"\u786e\u5b9a",cancelText:"\u4e0d\u5220\u4e86"},c.a.createElement(v.a,{size:"small",danger:!0,icon:c.a.createElement(I.a,null)},"\u5220\u9664"))}}],y=function(){A.a.get("/api/get-prefix-list").then((function(e){e.data.success?n(e.data.data):O.a.error(e.data.errorMsg)}))};return Object(r.useEffect)((function(){y()}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"pb-10"},c.a.createElement(v.a,{type:"primary",onClick:function(){return u(!0)}},"\u65b0\u589e")),c.a.createElement(E.a,{dataSource:t,columns:b,rowKey:function(e){return e._id},pagination:!1}),c.a.createElement(j.a,{title:"\u65b0\u589e\u524d\u7f00",visible:i,onOk:function(){g.validateFields().then((function(e){var a={code:e.code.startsWith("/")?e.code:"/".concat(e.code),remark:e.remark};f(!0),A.a.post("/api/add-prefix",a).then((function(e){e.data.success?(f(!1),g.resetFields(),u(!1),y()):O.a.error(e.data.errorMsg)}))})).catch((function(e){return console.log(e)}))},onCancel:function(){return u(!1)},centered:!0,confirmLoading:d},c.a.createElement(k.a,Object.assign({form:g},ne,{name:"basic",initialValues:{code:"",delay:200}}),c.a.createElement(k.a.Item,{label:"\u524d\u7f00",name:"code",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\u524d\u7f00"}]},c.a.createElement(x.a,null)),c.a.createElement(k.a.Item,{label:"\u8bf4\u660e",name:"remark"},c.a.createElement(x.a,{autoComplete:"off"})))))},title:"\u63a5\u53e3\u524d\u7f00\u7ef4\u62a4"},{path:"/project",component:function(){var e=k.a.useForm(),a=Object(w.a)(e,1)[0],t=Object(r.useState)(null),n=Object(w.a)(t,2),l=n[0],o=n[1];return Object(r.useEffect)((function(){A.a.get("/api/get-config").then((function(e){if(e.data.success){if(!e.data.data.target)return;a.setFieldsValue({target:e.data.data.target,delay:e.data.data.delay,changeOrigin:e.data.data.changeOrigin}),o(e.data.data._id)}else O.a.error(e.data.errorMsg)}))}),[o,a]),c.a.createElement("div",{className:"p-20"},c.a.createElement(k.a,Object.assign({form:a},re,{name:"basic",initialValues:{changeOrigin:!1,delay:200},onFinish:function(e){console.log("Success:",e);var a={target:e.target,delay:e.delay,id:l,changeOrigin:e.changeOrigin};A.a.post("/api/update-config",a).then((function(e){e.data.success?O.a.success("\u4fdd\u5b58\u6210\u529f"):O.a.error(e.data.errorMsg)}))},onFinishFailed:function(e){console.log("Failed:",e)}}),c.a.createElement(k.a.Item,{label:"\u4ee3\u7406\u5730\u5740",name:"target",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u4ee3\u7406\u5730\u5740"}]},c.a.createElement(x.a,null)),c.a.createElement(k.a.Item,{label:"\u54cd\u5e94\u5ef6\u65f6",name:"delay",rules:[{required:!0,message:"\u8bf7\u8f93\u5165Mock\u63a5\u53e3\u54cd\u5e94\u5ef6\u65f6!"}]},c.a.createElement(x.a,{autoComplete:"off"})),c.a.createElement(k.a.Item,{label:"\u53d8\u66f4\u6765\u6e90",name:"changeOrigin"},c.a.createElement(p.a.Group,null,c.a.createElement(p.a,{value:!0},"\u53d8\u66f4"),c.a.createElement(p.a,{value:!1},"\u4e0d\u53d8\u66f4"))),c.a.createElement(k.a.Item,ce,c.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u4fdd\u5b58"))))},title:"\u9879\u76ee\u914d\u7f6e\u7ef4\u62a4"},{path:"/document",component:function(){return c.a.createElement("div",null,"Document")},title:"\u6587\u6863\u8bf4\u660e"}];var oe=Object(m.f)((function(e){for(var a="1",t=0;t<le.length;t++)le[t].path===e.history.location.pathname&&(a="".concat(t+1));return c.a.createElement(r.Fragment,null,c.a.createElement("div",{style:{float:"left",fontSize:"20px",marginRight:"20px",height:"64px"}},"SNAKE-API ",c.a.createElement("small",null,"mini")),c.a.createElement(u.a,{mode:"horizontal",defaultSelectedKeys:[a],className:"float-left"},c.a.createElement(u.a.Item,{key:"1"},c.a.createElement(s.b,{to:"/"},"\u63a5\u53e3\u5217\u8868")),c.a.createElement(u.a.Item,{key:"2"},c.a.createElement(s.b,{to:"/base-data"},"\u54cd\u5e94\u6570\u636e\u7ef4\u62a4")),c.a.createElement(u.a.Item,{key:"3"},c.a.createElement(s.b,{to:"/prefix"},"\u63a5\u53e3\u524d\u7f00\u7ef4\u62a4")),c.a.createElement(u.a.Item,{key:"4"},c.a.createElement(s.b,{to:"/project"},"\u9879\u76ee\u914d\u7f6e\u7ef4\u62a4")),c.a.createElement(u.a.Item,{key:"5"},c.a.createElement(s.b,{to:"/document"},"\u6587\u6863\u8bf4\u660e"))),c.a.createElement("div",{className:"float-right"},c.a.createElement("a",{href:"https://www.snake-api.com",rel:"noopener noreferrer",target:"_blank",className:"mr-20"},"SNAKE-API \u5b98\u7f51"),c.a.createElement("a",{href:"https://gitee.com/seebin/mock-data/",rel:"noopener noreferrer",target:"_blank"},c.a.createElement("img",{src:"https://gitee.com/seebin/mock-data/badge/star.svg?theme=dark",alt:"star"}))))})),ie=(t(449),t(164));function ue(e){return c.a.createElement("div",{style:{padding:"66px 20px 0 20px",minHeight:"calc(100vh - 42px)"}},c.a.createElement(ie.a,{style:{padding:"10px 0"}},c.a.createElement(ie.a.Item,null,"\u63a5\u53e3\u5217\u8868")),e.children)}var se=i.a.Header,me=i.a.Footer,de=i.a.Content;function fe(e){return document.title=e.title,c.a.createElement(m.a,{exact:e.exact,path:e.path,render:function(a){return c.a.createElement(e.component,Object.assign({},a,{routes:e.routes}))}})}var pe=function(){return c.a.createElement(s.a,null,c.a.createElement(i.a,null,c.a.createElement(se,{className:"header",style:{position:"fixed",zIndex:1,width:"100%",padding:"0 20px"}},c.a.createElement(oe,null)),c.a.createElement(de,null,c.a.createElement(ue,null,c.a.createElement(m.c,null,le.map((function(e,a){return c.a.createElement(fe,Object.assign({key:e.path},e))}))))),c.a.createElement(me,{style:{textAlign:"center",padding:"10px"}},"\u6280\u672f\u652f\u6301\uff1aseebin | \u9489\u9489\u4ea4\u6d41\u7fa4:21958681")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ee=t(228);o.a.render(c.a.createElement(n.a,{locale:Ee.a},c.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[232,1,2]]]);
//# sourceMappingURL=main.5d49e327.chunk.js.map